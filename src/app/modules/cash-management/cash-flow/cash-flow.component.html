<div class="min-h-screen bg-gray-50 p-6">
  <div class="max-w-7xl mx-auto">
    <!-- Header -->
    <div class="mb-8">
      <div class="flex items-center justify-between">
        <div>
          <h1 class="text-3xl font-bold text-gray-900">Cash Flow Dashboard</h1>
          <p class="text-gray-600 mt-1">Financial overview for August 17, 2025</p>
        </div>
        <div class="flex items-center space-x-2 bg-white px-4 py-2 rounded-lg shadow-sm border">
          <svg class="h-5 w-5 text-gray-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
          </svg>
          <span class="text-sm font-medium text-gray-700">
            {{ formatReportDate(reportData?.reportDate??null) }}
          </span>
        </div>
      </div>
    </div>

    <!-- Summary Cards -->
    <app-cash-balance-viewer [balanceSummary]="reportData?.balanceSummary??null"></app-cash-balance-viewer>

    <!-- Transaction Details -->
      <div class="bg-white rounded-xl shadow-sm border border-gray-200">
          <div class="flex flex-wrap items-center justify-between gap-2 py-3 px-5">
          <div class="p-6 border-b border-gray-200">
            <h2 class="text-xl font-semibold text-gray-900">Transaction Details</h2>
            <p class="text-gray-600 text-sm mt-1">{{ pageResponse?.totalElements }} transactions recorded</p>
          </div>
              <div class="flex flex-wrap gap-2">
        <div class="flex flex-wrap items-center justify-between gap-2 px-8 text-xs text-muted-foreground">
          <div class="flex items-center gap-2">
            Show
            <select class="w-16 p-2 border border-gray-300 rounded-md" name="rowSize" (change)="onSelectChange($event)">
              <option *ngFor="let option of getPageSizeOptions()" 
                      [value]="option.value" 
                      [selected]="option.value === selectedRows">
                {{ option.label }}
              </option>
            </select>
            per page
          </div>
        </div>
        <div class="flex">
          <label class="relative text-muted-foreground">
            <div class="absolute left-2.5 top-2.5">
              <svg-icon src="./assets/icons/heroicons/outline/magnifying-glass.svg" [svgClass]="'h-4 w-4'">
              </svg-icon>
            </div>
            <input 
              name="search" 
              class="py-2 pl-8 pr-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent" 
              placeholder="Search transactions..." 
              type="text" 
              [value]="search"
              (keydown.enter)="onSearchChange($event)" 
              (input)="onSearchChange($event)" />
          </label>
        </div>
      </div>
      </div>

      <div class="divide-y divide-gray-200">
        <div *ngFor="let flow of pageResponse?.content; let i = index"
          class="p-6 hover:bg-gray-50 transition-colors duration-150">
          <div class="flex items-center justify-between">
            <div class="flex items-center space-x-4">
              <div [ngClass]="'p-2 rounded-full ' + getFlowTypeStyle(flow.flowType).bgColor">
                <div [innerHTML]="getFlowTypeStyle(flow.flowType).iconSvg"
                  [ngClass]="'h-5 w-5 ' + getFlowTypeStyle(flow.flowType).iconColor"></div>
              </div>
              <div>
                <h3 class="font-medium text-gray-900">{{ flow.description }}</h3>
                <div class="flex items-center space-x-4 mt-1">
                  <span class="text-sm text-gray-500">
                    {{ formatDate(flow.flowDate) }}
                  </span>
                  <span [ngClass]="'inline-flex px-2 py-1 text-xs font-medium rounded-full ' + 
                           getFlowTypeStyle(flow.flowType).bgColor + ' ' + 
                           getFlowTypeStyle(flow.flowType).textColor">
                    {{ getFlowTypeStyle(flow.flowType).label }}
                  </span>
  
                </div>
              </div>
            </div>
            <div class="text-right">
              <div [ngClass]="'text-lg font-semibold ' + getFlowTypeStyle(flow.flowType).textColor">
                {{ isInflowType(flow.flowType) ? '+' : '-' }}{{ formatCurrency(flow.amount) }}
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

      <div *ngIf="showPagination && !loading" 
       class="flex flex-wrap items-center justify-between gap-2 py-3 px-5 text-xs text-muted-foreground">
    
    <!-- Pagination Controls -->
    <div class="flex items-center gap-4">
      <div class="inline-flex items-center gap-1">
        <!-- First Page Button -->
        <button
          *ngIf="!first"
          class="inline-flex h-7 w-7 flex-shrink-0 items-center justify-center rounded-md text-sm hover:bg-muted-foreground/10 transition-colors"
          (click)="goToFirstPage()"
          title="First Page">
          <svg-icon src="./assets/icons/heroicons/outline/chevron-double-left.svg" [svgClass]="'h-4 w-4'">
          </svg-icon>
        </button>

        <!-- Previous Page Button -->
        <button
          class="inline-flex h-7 w-7 flex-shrink-0 items-center justify-center rounded-md text-sm disabled:opacity-50 hover:bg-muted-foreground/10 transition-colors"
          [disabled]="first" 
          (click)="goToPreviousPage()"
          title="Previous Page">
          <svg-icon src="./assets/icons/heroicons/outline/arrow-long-left.svg" [svgClass]="'h-4 w-4'">
          </svg-icon>
        </button>

        <!-- Page Numbers -->
        <ng-container *ngFor="let page of getVisiblePages()">
          <button 
            *ngIf="isClickablePage(page)"
            class="inline-flex h-7 w-7 flex-shrink-0 items-center justify-center rounded-md text-sm transition-colors" 
            [ngClass]="{
              'bg-primary text-primary-foreground': isCurrentPage(page),
              'hover:bg-muted-foreground/10': !isCurrentPage(page)
            }" 
            (click)="goToPage(page)">
            {{ getPageNumber(page) }}
          </button>
          
          <span 
            *ngIf="!isClickablePage(page)" 
            class="inline-flex h-7 w-7 flex-shrink-0 items-center justify-center text-sm">
            ...
          </span>
        </ng-container>

        <!-- Next Page Button -->
        <button
          class="inline-flex h-7 w-7 flex-shrink-0 items-center justify-center rounded-md text-sm disabled:opacity-50 hover:bg-muted-foreground/10 transition-colors"
          [disabled]="last" 
          (click)="goToNextPage()"
          title="Next Page">
          <svg-icon src="./assets/icons/heroicons/outline/arrow-long-right.svg" [svgClass]="'h-4 w-4'">
          </svg-icon>
        </button>

        <!-- Last Page Button -->
        <button
          *ngIf="!last"
          class="inline-flex h-7 w-7 flex-shrink-0 items-center justify-center rounded-md text-sm hover:bg-muted-foreground/10 transition-colors"
          (click)="goToLastPage()"
          title="Last Page">
          <svg-icon src="./assets/icons/heroicons/outline/chevron-double-right.svg" [svgClass]="'h-4 w-4'">
          </svg-icon>
        </button>
      </div>
    </div>
  </div>

    <!-- Footer -->
    <div class="mt-8 text-center text-sm text-gray-500">
      <p>Cash Flow Report Generated on {{ getCurrentDate() }}</p>
    </div>
  </div>
</div>