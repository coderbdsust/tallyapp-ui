<form class="my-10 space-y-6" [formGroup]="form" (ngSubmit)="onSubmit()">
  <div class="text-center">
    <h2 class="mb-1 text-3xl font-semibold text-foreground">Sign Up <span class="text-primary">!</span></h2>
  </div>

  <div class="space-y-3 text-left">
    <div class="form__group">
      <div class="relative">
        <input
          type="text"
          id="fullName"
          class="peer block"
          placeholder=" "
          [ngClass]="{ 'is__invalid-input': submitted && f['fullName'].errors }"
          formControlName="fullName" />
        <label
          for="fullName"
          class="absolute top-2 left-1 z-10 origin-[0] -translate-y-4 scale-95 transform bg-background px-2 text-sm text-muted-foreground duration-300 peer-placeholder-shown:top-1/2 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:scale-100 peer-focus:top-2 peer-focus:-translate-y-4 peer-focus:scale-95 peer-focus:px-2 peer-focus:text-primary">
          Full Name
        </label>
      </div>
      <div *ngIf="submitted && f['fullName'].errors" class="is__invalid-error">
        <div *ngIf="f['fullName'].errors['required']">Required field</div>
      </div>
    </div>
    <div class="form__group">
      <div class="relative">
        <input
          type="text"
          id="email"
          class="peer block"
          placeholder=" "
          [ngClass]="{ 'is__invalid-input': submitted && f['email'].errors }"
          formControlName="email" />
        <label
          for="email"
          class="absolute top-2 left-1 z-10 origin-[0] -translate-y-4 scale-95 transform bg-background px-2 text-sm text-muted-foreground duration-300 peer-placeholder-shown:top-1/2 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:scale-100 peer-focus:top-2 peer-focus:-translate-y-4 peer-focus:scale-95 peer-focus:px-2 peer-focus:text-primary">
          Email address
        </label>
      </div>
      <div *ngIf="submitted && f['email'].errors" class="is__invalid-error">
        <div *ngIf="f['email'].errors['required']">Required field</div>
        <div *ngIf="f['email'].errors['email']">Enter a valid email address</div>
      </div>
    </div>
    <div class="form__group">
      <div class="relative">
        <input
          type="text"
          id="username"
          class="peer block"
          placeholder=" "
          [ngClass]="{ 'is__invalid-input': submitted && f['username'].errors }"
          formControlName="username" />
        <label
          for="username"
          class="absolute top-2 left-1 z-10 origin-[0] -translate-y-4 scale-95 transform bg-background px-2 text-sm text-muted-foreground duration-300 peer-placeholder-shown:top-1/2 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:scale-100 peer-focus:top-2 peer-focus:-translate-y-4 peer-focus:scale-95 peer-focus:px-2 peer-focus:text-primary">
          Username
        </label>
      </div>
      <div *ngIf="submitted && f['username'].errors" class="is__invalid-error">
        <div *ngIf="f['username'].errors['required']">Required field</div>
      </div>
    </div>
    <div class="form__group">
      <div class="relative">

        <select id="gender" name="gender" formControlName="gender"
          class="py-2.5 px-0 indent-4 w-full text-sm rounded bg-white border border-b-2 border-gray-200 appearance-none dark:text-gray-400 dark:border-gray-700 focus:outline-none focus:ring-0 focus:border-gray-200 peer">
            <option value="-1" >Select Gender</option>
            <ng-container *ngFor="let gender of genderList; let i = index;">
              <option [value]="gender">{{gender | word}}
              </option>
            </ng-container>
        </select> 

        <label
          for="gender"
          class="absolute top-2 left-1 z-10 origin-[0] -translate-y-4 scale-95 transform bg-background px-2 text-sm text-muted-foreground duration-300 peer-placeholder-shown:top-1/2 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:scale-100 peer-focus:top-2 peer-focus:-translate-y-4 peer-focus:scale-95 peer-focus:px-2 peer-focus:text-primary">
          Gender
        </label>
      </div>
      <div *ngIf="submitted && f['gender'].errors" class="is__invalid-error">
        <div *ngIf="f['gender'].errors['required']">Required field</div>
      </div>
    </div>
    <div class="form__group">
      <div class="relative">
        <div class="flex gap-4">
          <!-- Day -->
          <div class="relative w-full">
            <select
              id="day"
              name="day"
              formControlName="day"
              class="peer block w-full appearance-none rounded-md border p-2">
              <option *ngFor="let day of days" [ngValue]="day">{{ day }}</option>
            </select>
            <label
              for="day"
              class="absolute top-2 left-2 z-10 origin-[0] -translate-y-4 scale-95 transform bg-background px-1 text-sm text-muted-foreground duration-300 peer-placeholder-shown:top-2 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:top-2 peer-focus:-translate-y-4 peer-focus:scale-95 peer-focus:px-1 peer-focus:text-primary">
              Birth Day
            </label>
          </div>

          <!-- Month -->
          <div class="relative w-full">
            <select
              id="month"
              name="month"
              formControlName="month"
              class="peer block w-full appearance-none rounded-md border p-2">
              <option *ngFor="let month of months" [ngValue]="month.id">{{ month.fullName }}</option>
            </select>
            <label
              for="month"
              class="absolute top-2 left-2 z-10 origin-[0] -translate-y-4 scale-95 transform bg-background px-1 text-sm text-muted-foreground duration-300 peer-placeholder-shown:top-2 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:top-2 peer-focus:-translate-y-4 peer-focus:scale-95 peer-focus:px-1 peer-focus:text-primary">
              Birth Month
            </label>
          </div>

          <!-- Year -->
          <div class="relative w-full">
            <select
              id="year"
              name="year"
              formControlName="year"
              class="peer block w-full appearance-none rounded-md border p-2">
              <option *ngFor="let year of years" [ngValue]="year">{{ year }}</option>
            </select>
            <label
              for="year"
              class="absolute top-2 left-2 z-10 origin-[0] -translate-y-4 scale-95 transform bg-background px-1 text-sm text-muted-foreground duration-300 peer-placeholder-shown:top-2 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:top-2 peer-focus:-translate-y-4 peer-focus:scale-95 peer-focus:px-1 peer-focus:text-primary">
              Birth Year
            </label>
          </div>
        </div>
        <div *ngIf="submitted && (f['day'].errors || f['month'].errors || f['year'].errors)" class="is__invalid-error">
          <div
            *ngIf="f['day']?.errors?.['required'] 
          || f['month']?.errors?.['required'] 
          || f['year']?.errors?.['required']">
            Date of Birth is required field
          </div>
        </div>
      </div>
    </div>
    <div class="form__group">
      <div class="relative">
        <input
          type="password"
          id="password"
          class="peer block"
          placeholder=" "
          (input)="onPasswordInput($event)" 
          [type]="passwordTextType ? 'text' : 'password'"
          [ngClass]="{ 'is__invalid-input': submitted && f['password'].errors }"
          formControlName="password" />
        <label
          for="password"
          class="absolute top-2 left-1 z-10 origin-[0] -translate-y-4 scale-95 transform bg-background px-2 text-sm text-muted-foreground duration-300 peer-placeholder-shown:top-1/2 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:scale-100 peer-focus:top-2 peer-focus:-translate-y-4 peer-focus:scale-95 peer-focus:px-2 peer-focus:text-primary">
          Password
        </label>

        <span class="absolute top-2.5 right-5 cursor-pointer text-muted-foreground" (click)="togglePasswordTextType()">
          <svg-icon
            [src]="
              !passwordTextType
                ? 'assets/icons/heroicons/outline/eye-off.svg'
                : 'assets/icons/heroicons/outline/eye.svg'
            "
            [svgClass]="'h-5 w-5'">
          </svg-icon>
        </span>
      </div>
      <div *ngIf="submitted && f['password'].errors" class="is__invalid-error">
        <div *ngIf="f['password'].errors['required']">Required field</div>
        <div *ngIf="f['password'].errors['pattern']">
          Password must be alpha numeric with atleast one special symbol, Minimum Length 8
        </div>
      </div>
    </div>
    <!-- Password Meeter -->
    <div class="grid grid-cols-4 gap-2">
      <div
        *ngFor="let bar of [0, 1, 2, 3]; let i = index"
        class="h-1 rounded-sm"
        [ngClass]="{
          'bg-red-500': this.passwordStrength === 1 && i < this.passwordStrength,
          'bg-yellow-300': this.passwordStrength === 2 && i < this.passwordStrength,
          'bg-green-200': this.passwordStrength === 3 && i < this.passwordStrength,
          'bg-green-500':this.passwordStrength === 4 && i < this.passwordStrength,
          'bg-muted': i >= this.passwordStrength
        }">
      </div>
    </div>
    
    <span class="text-xs text-muted-foreground">
      Use 8 or more characters with a mix of letters, numbers & symbols.
    </span>
    <div class="form__group">
      <div class="relative">
        <input
          type="password"
          id="confirmPassword"
          class="peer block"
          placeholder=" "
          [type]="passwordTextType ? 'text' : 'password'"
          [ngClass]="{ 'is__invalid-input': submitted && f['confirmPassword'].errors }"
          formControlName="confirmPassword" />
        <label
          for="confirmPassword"
          class="absolute top-2 left-1 z-10 origin-[0] -translate-y-4 scale-95 transform bg-background px-2 text-sm text-muted-foreground duration-300 peer-placeholder-shown:top-1/2 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:scale-100 peer-focus:top-2 peer-focus:-translate-y-4 peer-focus:scale-95 peer-focus:px-2 peer-focus:text-primary">
          Confirm Password
        </label>
      </div>
      <div *ngIf="submitted && f['confirmPassword'].errors" class="is__invalid-error">
        <div *ngIf="f['confirmPassword'].errors['required']">Required field</div>
        <div *ngIf="f['confirmPassword'].errors['pattern']">
          Password must be alpha numeric with atleast one special symbol, Minimum Length 8
        </div>
      </div>
    </div>
  </div>

  <div *ngIf="submitted" class="is__invalid-error">
    <div *ngIf="errorMessage != ''">{{ errorMessage }}</div>
  </div>

  <!-- Submit Button -->
  <div>
    <app-button full impact="bold" tone="primary" shape="rounded" size="medium" [disabled]="form.invalid">Sign up</app-button>
  </div>

  <!-- Sign-up -->
  <div class="flex items-center text-sm text-muted-foreground">
    Already have an Account?
    <app-button routerLink="/auth/sign-in" impact="none" tone="primary" shape="rounded" size="small">
      Sign in
    </app-button>
  </div>
</form>
